<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Retaining Wall Checks - A Chu Code</title>
	<meta name="description" content="Calculation checks for retaining wall design">
	<meta name="author" content="Anthony Chu">

	<link rel="stylesheet" href="wall_css.css">
	<script src="javascript.js"></script>
	<!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>

<body>

<!-- Javascript check ......................................................... -->
<div id="js">
	Please enable javascript
</div>

<!-- Input ................................................................ -->

<nav id="input" style="display:none;">

<article id="wall">
	<h2>Wall Construction</h2>
	<pre>Stage 1 of 5</pre>

	<p>Dimensions and construction information of the retaining wall</p>

	<div class="form">

	Unit Weight: <input type="text" id="wall_weight" value="20">
	Stem Height: <input type="text" id="stem_height" value="10">
	Stem Thickness: <input type="text" id="stem_thickness" value="0.5">

	Toe Length: <input type="text" id="toe_length" value="1">
	Heel Length: <input type="text" id="heel_length" value="5">
	
	Base Thickness: <input type="text" id="base_thickness" value="0.5">

	<input id="shear_key" type="checkbox" class="inline">Shear Key:<br />
	<aside id="shear_key_yes">
	Shear Key Height: <input type="text" id="shear_key_height" value="1">
	Shear Key Thickness: <input type="text" id="shear_key_thickness" value="0.5">
	</aside>

	<script>

	$('#shear_key').click (function(){
		redraw();
		$('#shear_key_yes')[0].style.display = 'none';

		if ($('#shear_key').is(':checked'))
		{
			$('#shear_key_yes')[0].style.display = 'block';
		}
	});

	</script>

	Front Face Detailing: <select id="front_detailing"><option value="none">None</option><option value="stepped">Stepped</option><option value="inclined">Inclined</option></select>

	<aside id="front_detailing_form_stepped">
		Number of Steps: <input type="text" id="front_steps" value="5">
		Step Depth: <input type="text" id="front_step_depth" value="0.1">
		Step Run: <input type="text" id="front_step_run" value="0.1">
	</aside>

	<aside id="front_detailing_form_inclined">
		Inclination Angle: <input type="text" id="front_angle" value="5">
	</aside>
	
	<script>

	$("#front_detailing").change(function(){
		redraw();
		$("#front_detailing_form_stepped")[0].style.display = "none";
		$("#front_detailing_form_inclined")[0].style.display = "none";

		if ($("#front_detailing").val() == 'stepped')
		{
			$("#front_detailing_form_stepped")[0].style.display = "block";
		}
		
		if ($("#front_detailing").val() == 'inclined')
		{
			$("#front_detailing_form_inclined")[0].style.display = "block";
		}
	});

	</script>

	Retaining Face Detailing: <select id="back_detailing"><option value="none">None</option><option value="stepped">Stepped</option><option value="inclined">Inclined</option></select>
		
	<aside id="back_detailing_form_stepped">
		Number of Steps: <input type="text" id="back_steps" value="5">
		Step Depth: <input type="text" id="back_step_depth" value="0.1">
		Step Run: <input type="text" id="back_step_run" value="0.1">
	</aside>

	<aside id="back_detailing_form_inclined">
		Inclination Angle: <input type="text" id="back_angle" value="5">
	</aside>
	
	<script>

	$("#back_detailing").change(function(){
		$("#back_detailing_form_stepped")[0].style.display = "none";
		$("#back_detailing_form_inclined")[0].style.display = "none";

		if ($("#back_detailing").val() == 'stepped')
		{
			$("#back_detailing_form_stepped")[0].style.display = "block";
		}
		if ($("#back_detailing").val() == 'inclined')
		{
			$("#back_detailing_form_inclined")[0].style.display = "block";
		}
		redraw();
	});

	</script>

	</div>

</article>

<article id="retained_soil">
	<h2>Retained Soil</h2>
	<pre>Stage 2 of 5</pre>

	<p>Information on the retained soil which will apply loading conditions on the wall, from the surface top to the bottom of the retaining wall:</p>

	<div class="soil_name">Name</div><div class="soil_depth">Depth</div><div class="soil_dry">Dry Weight</div><div class="soil_wet">Wet Weight</div><div class="soil_angle">Angle</div>
	<p id="soil_form">
	</p>
	<a id="add_retained_layer">Add new layer...</a>

	<script>
	function new_retained_layer()
	{
		$("#soil_form").append('<div class="retained_layer"><input type="text" class="soil_name"><input type="text" class="soil_depth" value=5><input type="text" value=15 class="soil_dry"><input type="text" value=20 class="soil_wet"><input type="text" value=30 class="soil_angle"><input type="button" class="delete" value="X"></div>');
	}

	$("#add_retained_layer").click(function(){new_retained_layer(); redraw();});

	new_retained_layer();

	$("#soil_form").on('click', '.delete', function(){
		$(this).parent().remove(); redraw(); 
	});
	</script>
</article>

<article id="cover_soil">
	<h2>Cover Soil</h2>
	<pre>Stage 3 of 5</pre>

	<p>Information on the soil on the passive side of the wall</p>

	<div class="soil_name">Name</div><div class="soil_depth">Depth</div><div class="soil_dry">Dry Weight</div><div class="soil_wet">Wet Weight</div><div class="soil_angle">Angle</div>
	<p id="cover_form">
	</p>
	<a id="add_cover_layer">Add new layer...</a>

	<script>
	function new_cover_layer()
	{
		$("#cover_form").append('<div class="cover_layer"><input type="text" class="soil_name"><input type="text" class="soil_depth" value=5><input type="text" value=15 class="soil_dry"><input type="text" value=20 class="soil_wet"><input type="text" value=30 class="soil_angle"><input type="button" class="delete" value="X"></div>');
	}

	$("#add_cover_layer").click(function(){new_cover_layer(); redraw(); });

	new_cover_layer();

	$("#cover_form").on('click', '.delete', function(){
		$(this).parent().remove(); redraw(); 
	});
	</script>

</article>

<article id="bearing_soil">
	<h2>Bearing Soil</h2>
	<pre>Stage 4 of 5</pre>

	<p>Information on the bearing soil that the wall will sit on</p>

	Unit Weight: <input type="text" id="bearing_weight" value=20>
	Angle: <input type="text" id="bearing_angle" value=30>
	Shear Strength: <input type="text" id="bearing_strength" value=40>
</article>

<article id="water_table">
	<h2>Water Table</h2>
	<pre>Stage 5 of 6</pre>

	<p>Position of the water table in relation to the bottom of the retaining wall</p>

	<input class="inline" type="checkbox" id="check_inside">Inner-side of wall:
	<input type="text" id="water_inside" value=2>

	<input class="inline" type="checkbox" id="check_under">Under wall:
	<input type="text" id="water_under" value="-5">

	<input class="inline" type="checkbox" id="check_outside">Outer-Side of wall:
	<input type="text" id="water_outside" value=2>

	<script>
	$('#water_inside')[0].style.display = 'none';
	$('#water_under')[0].style.display = 'none';
	$('#water_outside')[0].style.display = 'none';

	$('#check_inside').click (function(){
		$('#water_inside')[0].style.display = 'none';

		if ($('#check_inside').is(':checked'))
		{
			$('#water_inside')[0].style.display = 'block';
		}
	});

	$('#check_under').click (function(){
		$('#water_under')[0].style.display = 'none';

		if ($('#check_under').is(':checked'))
		{
			$('#water_under')[0].style.display = 'block';
		}
	});

	$('#check_outside').click (function(){
		$('#water_outside')[0].style.display = 'none';

		if ($('#check_outside').is(':checked'))
		{
			$('#water_outside')[0].style.display = 'block';
		}
	});
	</script>
</article>

<article id="loading">
	<h2>Additional Loading</h2>
	<pre>Stage 6 of 6</pre>

	<p>Additional loads which are applied on the retaining wall, (0,0) is located at the bottom of the toe. x is positive right, y is positive up</p>

	Surcharge (kN/m): <input type="text" id="surcharge" value="0">

	<p>Point Loads:</p>
	<div class="pos_x">X</div><div class="pos_y">Y</div><div class="force_x">Fx</div><div class="force_y">Fy</div>
	<p id="force_form">
	</p>
	<a id="add_force_layer">Add new force...</a>

	<script>
	function new_force_layer()
	{
		$("#force_form").append('<div class="force_layer"><input type="text" class="pos_x" value=0 ><input type="text" class="pos_y" value=0 ><input type="text" value=0 class="force_x"><input type="text" value=0 class="force_y"><input type="button" class="delete" value="X"></div>');
	}

	$("#add_force_layer").click(function(){new_force_layer(); redraw(); });

	new_force_layer();

	$("#force_form").on('click', '.delete', function(){
		$(this).parent().remove(); redraw(); 
	});
	</script>
</article>

<!-- Drawing .................................................................. -->

<div id="sketch">
<img id="preview" style="width:100%; height:100%;" src="/" alt="No preview available">
<div id="error">
</div>
<script>

$(document).on('change', 'input', function(){redraw()});
$("input").change(function(){redraw()});
$("select").change(function(){redraw()});

redraw();

</script>
</div>

</nav>


<div id="solve">
<a id="solve_button">Solve</a>	
</div>

<script>
$("#solve").click(function(){
	if ($("#error").html() == '')
	{
	if ($("#solve_button").html() == 'Solve')
	{
		$("#solve_button").html('Edit');
		$("#input")[0].style.display = 'none';
		$("#output")[0].style.display = 'block';
		calculate();
		document.location.href = "#"; 
	}
	else 
	{
		$("#solve_button").html('Solve');
		$("#input")[0].style.display = 'block';
		$("#output")[0].style.display = 'none';		
		document.location.href = "#"; 
	}
	}
	else
	{
		alert('Correct errors before calculation');	
	}
});
</script>

<!-- Output ................................................................... -->

<nav id="output" style="display:none">
	<article id="results">
	<h2>Results</h2>
	<p>All results are to 3 s.f, roundings are not carried through calculation process. Positive forces are favourable whilst negative forces are unfavourable. Lever arms are taken as negative for vertical forces for correct sign convention.</p>

	<h3>Headline Result - <span id="headline_result"></span></h3>
	<table>
		<tr><th><pre><u>Sliding</u></pre></th><th>Combination 1</th><th>Combination 2</th></tr>
		<tbody>
			<tr><td>Unfavourable</td><td id="unfavourable_slide_1"></td><td id="unfavourable_slide_2"></td></tr>
			<tr><td>Favourable</td><td id="favourable_slide_1"></td><td id="favourable_slide_2"></td></tr>
			<tr><td>Utilisation Factor</td><td id="utilisation_slide_1"></td><td id="utilisation_slide_2"></td></tr>
		</tbody>
		<tr><th><pre><u>Overturning</u></pre></th><th>Combination 1</th><th>Combination 2</th></tr>
		<tbody>
			<tr><td>Unfavourable</td><td id="unfavourable_over_1"></td><td id="unfavourable_over_2"></td></tr>
			<tr><td>Favourable</td><td id="favourable_over_1"></td><td id="favourable_over_2"></td></tr>
			<tr><td>Utilisation Factor</td><td id="utilisation_over_1"></td><td id="utilisation_over_2"></td></tr>
		</tbody>
		<tr><th><pre><u>Eccentricity</u></pre></th><th>Combination 1</th><th>Combination 2</th></tr>
		<tbody>
			<tr><td>Total Vertical</td><td id="total_vertical_1"></td><td id="total_vertical_2"></td></tr>
			<tr><td>Total Moment (about centre)</td><td id="total_moment_1"></td><td id="total_moment_2"></td></tr>
			<tr><td>Width</td><td id="base_width_1"></td><td id="base_width_2"></td></tr>		
			<tr><td>Eccentricity</td><td id="eccentricity_1"></td><td id="eccentricity_2"></td></tr>
		</tbody>
	</table>

	<h3>Horizontal Forces</h3>
	<table>
	<tr><th colspan="10"><pre><u>Unfavourable</u></pre></th></tr>
	<tr><th colspan="10"><pre>Retained soil - Vertical Stress</pre></th></tr>
	<tr><th colspan="4">Layer</th><th>Sv (Top)</th><th>Weight</th><th>Depth</th><th>Sv (bot)</th><th>u</th><th>Sv' (bot)</th>
	<tbody id="s_retained"></tbody>

	<tr><th colspan="10"><pre>Retained soil - Horizontal Stress</pre></th></tr>
	<tr><th>Layer</th><th>Sv'</th><th>K (C2)</th><th>Sh' (C2)</th><th>Sh (C2)</th><th>F (C2)</th><th>K (C1)</th><th>Sh' (C1)</th><th>Sh (C1)</th><th>Factored F (C1)</th></tr>
	<tbody id="h_retained"></tbody>
	<tr><th colspan="10"><pre>Point loads</pre></th></tr>
	<tbody id="h_unfav"></tbody>

	<tr><th colspan="5"><pre><u>Total</u></pre></th><th>Total Unfav H (C2)</th><th></th><th></th><th></th><th>Total Unfav H (C1)</th></tr>
	<tr><td colspan="5"></td><td id="uh2" class="headline"></td><td></td><td></td><td></td><td id="uh1" class="headline"></td></tr>

	<tr><th colspan="10"><pre><u>Favourable</u></pre></th></tr>
	<tr><th colspan="10"><pre>Cover soil - Vertical Stress</pre></th></tr>
	<tr><th colspan="4">Layer</th><th>Sv (Top)</th><th>Weight</th><th>Depth</th><th>Sv (bot)</th><th>u</th><th>Sv' (bot)</th>
	<tbody id="s_cover"></tbody>

	<tr><th colspan="10"><pre>Cover soil - Horizontal Stress</pre></th></tr>
	<tr><th>Layer</th><th>Sv'</th><th>K (C2)</th><th>Sh' (C2)</th><th>Sh (C2)</th><th>F (C2)</th><th>K (C1)</th><th>Sh' (C1)</th><th>Sh (C1)</th><th>Factored F (C1)</th></tr>
	<tbody id="h_cover"></tbody>
	<tr><th colspan="10"><pre>Point loads</pre></th></tr>
	<tbody id="h_fav"></tbody>
	<tr><th colspan="5"><pre><u>Total</u></pre></th><th>Total Fav H (C2)</th><th colspan="3"></th><th>Total Fav H (C1)</th></tr>
	<tr><td colspan="5"></td><td id="fh2" class="headline"></td><td></td><td></td><td></td><td id="fh1" class="headline"></td></tr>

	</table>

	<h3>Vertical Forces</h3>
	<table>
	<tr><th colspan="10"><pre><u>Areas, &amp; Weights</u></pre></th></tr>
	<tr><th colspan="10"><pre>Wall:</pre></th></tr>
	<tr><th>Shape</th><th>Width</th><th>Height</th><th>Area</th><th>Density</th><th>Weight (C2)</th><th></th><th></th><th>Factor (C1)</th><th>Factored Weight (C1)</th></tr>
	<tbody id="wall_areas"></tbody>

	<tr><th colspan="10"><pre>Soil:</pre></th></tr>
	<tr><th>Shape</th><th>Width</th><th>Height</th><th>Area</th><th>Density</th><th>Weight (C2)</th><th></th><th></th><th>Factor (C1)</th><th>Factored Weight (C1)</th></tr>
	<tbody id="soil_areas"></tbody>
	
	<tr><th colspan="10"><pre><u>Other</u></pre></th></tr>
	<tr><th colspan='5'>Name</th><th>Weight (C2)</th><th></th><th></th><th>Factor (C1)</th><th>Factored Weight (C1)</th></tr>
	<tbody id="v_forces"></tbody>

	<tr><th colspan="5"><pre><u>Total</u></pre></th><th>Total Vertical (C2)</th><th></th><th></th><th></th><th>Total Vertical (C1)</th></tr>
	<tr><td colspan="5"></td><td class="headline" id="v2"></td><td></td><td></td><td></td><td class="headline" id="v1"></td></tr>
	</table>

	<h3>Moments [for Overturning]</h3>
	<table>
	<tr><th colspan="10"><pre><u>Vertical Forces</u></pre></th></tr>
	<tr><th colspan="3">Name</th><th>Unfactored Force</th><th>Moment Arm</th><th>Moment (C2)</th><th></th><th></th><th>Factor (C1)</th><th>Factored Moment (C1)</th></tr>
	<tbody id="v_wall_moments"></tbody>
	<tbody id="v_soil_moments"></tbody>
	<tbody id="v_moments"></tbody>

	<tr><th colspan="10"><pre><u>Horizontal Forces</u></pre></th></tr>
	<tr><th colspan="10"><pre>Soil</pre></th></tr>
	<tr><th>Layer</th><th>Depth</th><th>Sh Top (C2)</th><th>Sh Bot (C2)</th><th>Moment Arm</th><th>Moment (C2)</th><th>Sh Top (C1)</th><th>Sh Bot (C1)</th><th>Moment Arm</th><th>Factored Moment (C1)</th></tr>
	<tbody id="m_retained"></tbody>
	<tbody id="m_cover"></tbody>

	<tr><th colspan="10"><pre>Other</pre></th></tr>
	<tr><th colspan="3">Name</th><th>Unfactored Force</th><th>Moment Arm</th><th>Moment (C2)</th><th colspan="2"></th><th>Factor (C1)</th><th>Moment (C1)</th></tr>
	<tbody id="h_moments"></tbody>

	<tr><th colspan="10"><pre><u>Total</u></pre></th></tr>
	<tr><td colspan="4"></td><td>Favourable (C2)</td><td class="headline" id="m2_fav"></td><td></td><td></td><td>Favourable (C1)</td><td class="headline" id="m1_fav"></td></tr>
	<tr><td colspan="4"></td><td>Unfavourable (C2)</td><td class="headline" id="m2_unfav"></td><td></td><td></td><td>Unfavourable (C1)</td><td class="headline" id="m1_unfav"></td></tr>
	</table>
	<h3>Moments [for Eccentricity]</h3>
	<table>
	<tr><th colspan="10"><pre><u>Vertical Forces</u></pre></th></tr>
	<tr><th colspan="3">Name</th><th>Unfactored Force</th><th>Moment Arm</th><th>Moment (C2)</th><th></th><th></th><th>Factor (C1)</th><th>Factored Moment (C1)</th></tr>
	<tbody id="v_wall_moments_e"></tbody>
	<tbody id="v_soil_moments_e"></tbody>
	<tbody id="v_moments_e"></tbody>

	<tr><th colspan="10"><pre><u>Horizontal Forces</u></pre></th></tr>
	<tr><th colspan="10"><pre>Soil</pre></th></tr>
	<tr><th>Layer</th><th>Depth</th><th>Sh Top (C2)</th><th>Sh Bot (C2)</th><th>Moment Arm</th><th>Moment (C2)</th><th>Sh Top (C1)</th><th>Sh Bot (C1)</th><th>Moment Arm</th><th>Factored Moment (C1)</th></tr>
	<tbody id="m_retained_e"></tbody>
	<tbody id="m_cover_e"></tbody>

	<tr><th colspan="10"><pre>Other</pre></th></tr>
	<tr><th colspan="3">Name</th><th>Unfactored Force</th><th>Moment Arm</th><th>Moment (C2)</th><th colspan="2"></th><th>Factor (C1)</th><th>Moment (C1)</th></tr>
	<tbody id="h_moments_e"></tbody>

	<tr><th colspan="5"><pre><u>Total</u></pre></th><th>Total Moments (C2)</th><th></th><th></th><th></th><th>Total Moments (C1)</th></tr>
	<tr><td colspan="5"></td><td class="headline" id="m2_e"></td><td></td><td></td><td></td><td class="headline" id="m1_e"></td></tr>

	</table>

	</article>
</nav>

<script>
	$("#input").show();
	$("#js").hide();

	$(window).resize(function () {resize();});
	$(window).load(function(){resize();});
</script>

<p style="height:10%">
</p>

</body>
</html>